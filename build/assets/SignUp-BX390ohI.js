import{r as o,j as e,u as J,b as V,B as _,C as L,l as w,s as I,A as P,t as q,S as B}from"./index-DF_aLUF9.js";import{P as A,L as E,I as T}from"./label-DsXW6j-F.js";import{c as W,P as Q,u as Y,a as z,C as K}from"./index-BWptOT4J.js";import{u as ee}from"./index-D0v5to9z.js";import{S as re,L as se}from"./separator-CT6DoGzs.js";import{A as te}from"./arrow-left-28_3eWnb.js";function ae(r){const t=o.useRef({value:r,previous:r});return o.useMemo(()=>(t.current.value!==r&&(t.current.previous=t.current.value,t.current.value=r),t.current.previous),[r])}var S="Checkbox",[ne]=W(S),[oe,R]=ne(S);function ie(r){const{__scopeCheckbox:t,checked:h,children:i,defaultChecked:u,disabled:a,form:C,name:f,onCheckedChange:b,required:x,value:g="on",internal_do_not_use_render:m}=r,[n,p]=Y({prop:h,defaultProp:u??!1,onChange:b,caller:S}),[c,k]=o.useState(null),[y,d]=o.useState(null),s=o.useRef(!1),l=c?!!C||!!c.closest("form"):!0,v={checked:n,disabled:a,setChecked:p,control:c,setControl:k,name:f,form:C,value:g,hasConsumerStoppedPropagationRef:s,required:x,defaultChecked:N(u)?!1:u,isFormControl:l,bubbleInput:y,setBubbleInput:d};return e.jsx(oe,{scope:t,...v,children:ce(m)?m(v):i})}var M="CheckboxTrigger",F=o.forwardRef(({__scopeCheckbox:r,onKeyDown:t,onClick:h,...i},u)=>{const{control:a,value:C,disabled:f,checked:b,required:x,setControl:g,setChecked:m,hasConsumerStoppedPropagationRef:n,isFormControl:p,bubbleInput:c}=R(M,r),k=J(u,g),y=o.useRef(b);return o.useEffect(()=>{const d=a?.form;if(d){const s=()=>m(y.current);return d.addEventListener("reset",s),()=>d.removeEventListener("reset",s)}},[a,m]),e.jsx(A.button,{type:"button",role:"checkbox","aria-checked":N(b)?"mixed":b,"aria-required":x,"data-state":H(b),"data-disabled":f?"":void 0,disabled:f,value:C,...i,ref:k,onKeyDown:z(t,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:z(h,d=>{m(s=>N(s)?!0:!s),c&&p&&(n.current=d.isPropagationStopped(),n.current||d.stopPropagation())})})});F.displayName=M;var O=o.forwardRef((r,t)=>{const{__scopeCheckbox:h,name:i,checked:u,defaultChecked:a,required:C,disabled:f,value:b,onCheckedChange:x,form:g,...m}=r;return e.jsx(ie,{__scopeCheckbox:h,checked:u,defaultChecked:a,disabled:f,required:C,onCheckedChange:x,name:i,form:g,value:b,internal_do_not_use_render:({isFormControl:n})=>e.jsxs(e.Fragment,{children:[e.jsx(F,{...m,ref:t,__scopeCheckbox:h}),n&&e.jsx(X,{__scopeCheckbox:h})]})})});O.displayName=S;var D="CheckboxIndicator",G=o.forwardRef((r,t)=>{const{__scopeCheckbox:h,forceMount:i,...u}=r,a=R(D,h);return e.jsx(Q,{present:i||N(a.checked)||a.checked===!0,children:e.jsx(A.span,{"data-state":H(a.checked),"data-disabled":a.disabled?"":void 0,...u,ref:t,style:{pointerEvents:"none",...r.style}})})});G.displayName=D;var U="CheckboxBubbleInput",X=o.forwardRef(({__scopeCheckbox:r,...t},h)=>{const{control:i,hasConsumerStoppedPropagationRef:u,checked:a,defaultChecked:C,required:f,disabled:b,name:x,value:g,form:m,bubbleInput:n,setBubbleInput:p}=R(U,r),c=J(h,p),k=ae(a),y=ee(i);o.useEffect(()=>{const s=n;if(!s)return;const l=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(l,"checked").set,Z=!u.current;if(k!==a&&j){const $=new Event("click",{bubbles:Z});s.indeterminate=N(a),j.call(s,N(a)?!1:a),s.dispatchEvent($)}},[n,k,a,u]);const d=o.useRef(N(a)?!1:a);return e.jsx(A.input,{type:"checkbox","aria-hidden":!0,defaultChecked:C??d.current,required:f,disabled:b,name:x,value:g,form:m,...t,tabIndex:-1,ref:c,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});X.displayName=U;function ce(r){return typeof r=="function"}function N(r){return r==="indeterminate"}function H(r){return N(r)?"indeterminate":r?"checked":"unchecked"}function de({className:r,...t}){return e.jsx(O,{"data-slot":"checkbox",className:V("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:e.jsx(G,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(K,{className:"size-3.5"})})})}function be({onNavigate:r}){const[t,h]=o.useState(""),[i,u]=o.useState(""),[a,C]=o.useState(""),[f,b]=o.useState(!1),[x,g]=o.useState(""),[m,n]=o.useState(""),[p,c]=o.useState(!1),k=s=>{if(!s){g("");return}/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?g(""):g("Please enter a valid email address.")},y=s=>{const l=s.target.value;h(l),k(l)},d=async()=>{if(!t||!t.includes("@")){g("Please enter a valid email address.");return}if(!a.trim()){n("Please enter your full name");return}if(i.length<8){n("Password must be at least 8 characters");return}if(!f){n("Please agree to the Terms of Service and Privacy Policy");return}n(""),c(!0),w.cleanup("Clearing storage before signup..."),I.clearAll();try{const s=await fetch(`${P.BASE_URL}${P.ENDPOINTS.AUTH.SIGNUP}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ0bmdsdWJmb3l2Znd1eHhidWdzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NzkzMjksImV4cCI6MjA3NTI1NTMyOX0.gwLdjaddi_56cL3p0IDiMb0TTJRA56B1e7d3NPmeXVQ"},body:JSON.stringify({email:t.toLowerCase().trim(),password:i,fullName:a.trim()})}),l=await s.json();if(!s.ok){s.status===409?n("This email is already registered. Please sign in instead."):s.status===500&&l.error?.includes("Database schema")?(n("⚠️ System setup incomplete. Please contact support."),console.error("CRITICAL: Database schema not deployed!",l)):l.error?.includes("already registered")||l.error?.includes("already exists")||l.error?.includes("email is already registered")?n("This email is already registered. Please sign in instead."):n(l.error||"Failed to create account. Please try again."),c(!1);return}if(!l.success){n("Account creation failed. Please try again."),c(!1);return}try{const v=await fetch(`${P.BASE_URL}${P.ENDPOINTS.AUTH.SIGNIN}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ0bmdsdWJmb3l2Znd1eHhidWdzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NzkzMjksImV4cCI6MjA3NTI1NTMyOX0.gwLdjaddi_56cL3p0IDiMb0TTJRA56B1e7d3NPmeXVQ"},body:JSON.stringify({email:t.toLowerCase().trim(),password:i})}),j=await v.json();v.ok&&j.success&&j.accessToken?(I.setAccessToken(j.accessToken),I.setUserEmail(t.toLowerCase().trim()),I.setUserFullName(a.trim()),q.success("Welcome to Brand Sense! 🎉",{description:"Let's set up your first brand monitoring project.",duration:4e3}),c(!1),r?.(B.CREATE_PROJECT)):(w.warning("Auto sign-in failed after signup. Please sign in manually."),n("Account created! Please sign in to continue."),c(!1),setTimeout(()=>{r?.(B.SIGN_IN)},2e3))}catch(v){w.error("Auto sign-in error:",v),n("Account created! Please sign in to continue."),c(!1),setTimeout(()=>{r?.("signin")},2e3)}}catch(s){console.error("Sign up error:",s),n("Network error. Please check your connection and try again."),c(!1)}};return e.jsxs("div",{className:"w-full max-w-[400px] mx-auto",children:[e.jsxs("button",{onClick:()=>r?.("landing"),disabled:p,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-8 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"tracking-tight",children:"Back"})]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"mb-3 text-foreground tracking-tight",children:"Create Account"}),e.jsx("p",{className:"text-muted-foreground",children:"Start monitoring your brand in ChatGPT"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(_,{variant:"outline",disabled:!0,className:"w-full h-11 bg-card border-border opacity-50 cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google (Not Available)"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx(re,{className:"bg-border"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"bg-background px-3 text-muted-foreground uppercase tracking-wider",children:"or"})})]}),m&&e.jsxs("div",{className:"mb-4 p-4 border border-destructive/50 rounded-lg bg-destructive/10 flex items-start gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-destructive mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-destructive",children:m}),m.includes("already registered")&&e.jsx("button",{onClick:()=>r?.("signin"),className:"text-primary hover:text-primary/80 transition-colors mt-2 underline block",children:"Go to Sign In →"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"signup-fullname",className:"text-foreground",children:"Full Name"}),e.jsx(T,{id:"signup-fullname",type:"text",placeholder:"John Doe",value:a,onChange:s=>C(s.target.value),disabled:p,className:"h-11 bg-card border-border focus:border-primary transition-colors"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"signup-email",className:"text-foreground",children:"Email"}),e.jsx(T,{id:"signup-email",type:"email",placeholder:"john@example.com",value:t,onChange:y,disabled:p,className:`h-11 bg-card transition-colors ${x?"border-destructive focus:border-destructive":"border-border focus:border-primary"}`}),x&&e.jsxs("div",{className:"flex items-start gap-2 text-destructive mt-2",children:[e.jsx(L,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-sm",children:x})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"signup-password",className:"text-foreground",children:"Password"}),e.jsx(T,{id:"signup-password",type:"password",placeholder:"At least 8 characters",value:i,onChange:s=>u(s.target.value),disabled:p,className:"h-11 bg-card border-border focus:border-primary transition-colors"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Must be at least 8 characters"})]}),e.jsxs("div",{className:"flex items-start space-x-3 pt-2",children:[e.jsx(de,{id:"gdpr",checked:f,onCheckedChange:s=>b(s===!0),disabled:p,className:"mt-1 border-border"}),e.jsxs("label",{htmlFor:"gdpr",className:"text-muted-foreground cursor-pointer leading-relaxed",children:["I agree to the"," ",e.jsx("button",{className:"text-foreground hover:text-primary transition-colors",children:"Terms of Service"})," ","and"," ",e.jsx("button",{className:"text-foreground hover:text-primary transition-colors",children:"Privacy Policy"})]})]}),e.jsx(_,{onClick:d,disabled:!!x||!t||!a||!i||!f||p,className:"w-full h-11 mt-6 bg-primary hover:bg-primary/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):"Create Account"})]}),e.jsxs("div",{className:"text-center mt-8 pt-6 border-t border-border",children:[e.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),e.jsx("button",{onClick:()=>r?.("signin"),className:"text-foreground hover:text-primary transition-colors",children:"Sign In"})]})]})]})}export{be as SignUp};
