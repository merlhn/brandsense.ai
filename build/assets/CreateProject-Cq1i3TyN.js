import{c as z,r as t,j as e,C as b,B as D,s as x,S as j,p as O,l as U,t as W}from"./index-BH6jFkPW.js";import{L as d,I as N}from"./label-DUVze8Ca.js";import{S as M}from"./separator-hjWcF3sV.js";import{S as $}from"./sparkles-DzEEhazU.js";import{L as K}from"./loader-circle-Bnknbo1r.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],P=z("circle-check-big",_),H=["United States","United Kingdom","Canada","Australia","Germany","France","Spain","Italy","Netherlands","Turkey","Japan","South Korea","Brazil","Mexico","India","Global"],J=["English","Turkish","Spanish","French","German","Italian","Portuguese","Japanese","Korean","Chinese","Hindi","Dutch"];function Z({onNavigate:h}){const[u,E]=t.useState(""),[f,A]=t.useState("United States"),[y,B]=t.useState("English"),[v,I]=t.useState(""),[p,L]=t.useState(""),[w,F]=t.useState(""),[S,c]=t.useState(""),[a,l]=t.useState(!1),[i,g]=t.useState({}),k=r=>r.trim()?r.trim().length<2?"Brand name must be at least 2 characters":r.trim().length>100?"Brand name must be less than 100 characters":null:"Brand name is required",C=r=>{if(!r.trim())return null;try{return new URL(r).protocol.startsWith("http")?null:"Website URL must start with http:// or https://"}catch{return"Please enter a valid website URL"}},T=r=>{const s=r.target.value;E(s);const n=k(s);g(o=>({...o,brandName:n||void 0}))},R=r=>{const s=r.target.value;L(s);const n=C(s);g(o=>({...o,websiteUrl:n||void 0}))},G=async()=>{const r=k(u),s=C(p);if(r||s){g({brandName:r||void 0,websiteUrl:s||void 0});return}c(""),l(!0);try{const n=x.getAccessToken();if(!n){c("Session expired. Please sign in again."),l(!1),h?.(j.SIGN_IN);return}const o=await fetch(`https://${O}.supabase.co/functions/v1/make-server-cf9a9609/projects/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({name:u.trim(),market:f.trim(),language:y.trim(),industry:v.trim()||void 0,websiteUrl:p.trim()||void 0,description:w.trim()||void 0})}),m=await o.json();if(!o.ok){o.status===401?(c("Session expired. Please sign in again."),setTimeout(()=>{h?.(j.SIGN_IN)},2e3)):c(m.error||"Failed to create project. Please try again."),l(!1);return}if(!m.success||!m.project){c("Failed to create project. Please try again."),l(!1);return}x.saveProject(m.project),x.setCurrentProject(m.project),window.dispatchEvent(new Event("storage")),U.success("Project created successfully!"),W.success("Project Created! ðŸŽ‰",{description:`${u} is now being analyzed. Click Refresh Dashboard in 2-3 minutes to see your data.`,duration:6e3}),l(!1),h?.(j.DASHBOARD)}catch(n){U.error("Error creating project:",n),c("Network error. Please check your connection and try again."),l(!1)}};return e.jsxs("div",{className:"w-full max-w-[600px] mx-auto",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 border border-primary/20 flex items-center justify-center",children:e.jsx($,{className:"w-5 h-5 text-primary"})}),e.jsx("h1",{className:"text-foreground tracking-tight",children:"Create Your First Project"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Tell us about your brand so we can analyze its visibility in ChatGPT"})]}),S&&e.jsxs("div",{className:"mb-6 p-4 border border-destructive/50 rounded-lg bg-destructive/10 flex items-start gap-3",children:[e.jsx(b,{className:"w-5 h-5 text-destructive mt-0.5 shrink-0"}),e.jsx("p",{className:"text-destructive",children:S})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"brandName",className:"text-foreground",children:["Brand Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(N,{id:"brandName",type:"text",placeholder:"e.g., Nike, Apple, Tesla",value:u,onChange:T,disabled:a,className:`h-11 bg-card border-border transition-colors ${i.brandName?"border-destructive focus:border-destructive":"focus:border-primary"}`}),i.brandName&&e.jsxs("p",{className:"text-destructive tracking-tight flex items-center gap-1.5",children:[e.jsx(b,{className:"w-3.5 h-3.5"}),i.brandName]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"market",className:"text-foreground",children:["Market ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("select",{id:"market",value:f,onChange:r=>A(r.target.value),disabled:a,className:"w-full h-11 px-3 rounded-lg bg-card border border-border text-foreground focus:border-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:H.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"language",className:"text-foreground",children:["Language ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("select",{id:"language",value:y,onChange:r=>B(r.target.value),disabled:a,className:"w-full h-11 px-3 rounded-lg bg-card border border-border text-foreground focus:border-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:J.map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsx(M,{className:"bg-border"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-foreground tracking-tight mb-1",children:"Additional Information"}),e.jsx("p",{className:"text-muted-foreground tracking-tight mb-4",children:"Optional - Helps improve analysis accuracy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"industry",className:"text-foreground",children:"Industry"}),e.jsx(N,{id:"industry",type:"text",placeholder:"e.g., Technology, Fashion, Automotive",value:v,onChange:r=>I(r.target.value),disabled:a,className:"h-11 bg-card border-border focus:border-primary transition-colors"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"websiteUrl",className:"text-foreground",children:"Website URL"}),e.jsx(N,{id:"websiteUrl",type:"url",placeholder:"https://example.com",value:p,onChange:R,disabled:a,className:`h-11 bg-card border-border transition-colors ${i.websiteUrl?"border-destructive focus:border-destructive":"focus:border-primary"}`}),i.websiteUrl&&e.jsxs("p",{className:"text-destructive tracking-tight flex items-center gap-1.5",children:[e.jsx(b,{className:"w-3.5 h-3.5"}),i.websiteUrl]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",className:"text-foreground",children:"Brand Description"}),e.jsx("textarea",{id:"description",placeholder:"Brief description of your brand and what it does...",value:w,onChange:r=>F(r.target.value),disabled:a,rows:3,className:"w-full px-3 py-2 rounded-lg bg-card border border-border text-foreground focus:border-primary transition-colors resize-none disabled:opacity-50 disabled:cursor-not-allowed"})]})]})]}),e.jsx(D,{onClick:G,disabled:a||!u.trim()||!!i.brandName||!!i.websiteUrl,className:"w-full h-12 bg-primary hover:bg-primary/90 text-primary-foreground transition-all duration-150",children:a?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-5 h-5 mr-2 animate-spin"}),"Creating Project..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Create Project & Start Analysis"]})}),e.jsx("div",{className:"p-4 border border-primary/20 rounded-lg bg-primary/5",children:e.jsxs("p",{className:"text-muted-foreground tracking-tight",children:[e.jsx(P,{className:"w-4 h-4 inline mr-2 text-primary"}),"Analysis will start automatically and takes 2-3 minutes to complete"]})})]})]})}export{Z as CreateProject};
